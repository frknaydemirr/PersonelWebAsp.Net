@model MyPeronalWebSite.Models.ViewModel.NavbarViewModel
@using MyPeronalWebSite.Models



<header class="tmp-header-area-start header-one header--sticky header--transparent">
    <div class="tmp-sidebar-area tmp_side_bar">
        <div class="inner">
            <div class="top-area">
             
                <div class="close-icon-area">
                    <button class="tmp-round-action-btn close_side_menu_active">
                        <i class="fa-sharp fa-light fa-xmark"></i>
                    </button>
                </div>
            </div>
            <div class="content-wrapper">
                <div class="image-area-feature">
                    <a href="index.html">
                        <img src="@Model.Tbl_AboutMe.ImageURL" alt="personal-logo">
                    </a>
                </div>
                
                <p class="disc">
                    @Model.Tbl_AboutMe.ShortDescription
                </p>
                <div class="short-contact-area">
                    <!-- single contact information -->
                    <div class="single-contact">
                        <i class="fa-solid fa-phone"></i>
                        
                        <div class="information tmp-link-animation">
                          
                            <a href="#" class="number">@Model.Tbl_AboutMe.PhoneNumber</a>
                        </div>
                    </div>
                    <!-- single contact information end -->
                    <!-- single contact information -->
                    <div class="single-contact">
                        <i class="fa-solid fa-envelope"></i>
                        <div class="information tmp-link-animation">

                            <a href="mailto:@Model.Tbl_AboutMe.EmailAdress">@Model.Tbl_AboutMe.EmailAdress</a>
                        </div>

                    </div>
                    <!-- single contact information end -->
                    <!-- single contact information -->
                    <div class="single-contact">
                        <i class="fa-solid fa-location-crosshairs"></i>
                        <div class="information tmp-link-animation">
                          
                            <span class="number">@Model.Tbl_AboutMe.Adress</span>
                        </div>
                    </div>
                    <!-- single contact information end -->
                </div>
                <!-- social area start -->
                <div class="social-wrapper mt--20">
                  
                    <div class="social-link">

                        <a href="@Model.Tbl_AboutMe.LinkedlnURL"><i class="fa-brands fa-linkedin-in"></i></a>

                        <a href="@Model.Tbl_AboutMe.GithubURL"><i class="fa-brands fa-github"></i></a>
                    </div>
                </div>
                <!-- social area end -->
            </div>
        </div>
    </div>
    <div class="d-none d-xl-block">

        <a class="overlay_close_side_menu close_side_menu_active" href="javascript:void(0);"></a>
    </div>

    @*navbar*@
    <div class="container">
        <div class="row">
            <div class="col-lg-12">


                @{
                    var currentUrl = Context.Request.Path.ToString();
                    var menuItems = Model.Tbl_Navbar ?? new List<MyPeronalWebSite.Models.VT.Tbl_Navbar>();

                }



                <div class="header-content">
                    @{
                        var currentAction = ViewContext.RouteData.Values["action"]?.ToString()?.ToLower();
                    }

                    @if (currentAction != "projectdetail")
                    {
                        <nav class="tmp-mainmenu-nav d-none d-xl-block">
                            <ul class="tmp-mainmenu">
                                @foreach (var item in menuItems)
                                {
                                    var isActive = currentUrl == item.URL ? "current" : "";
                                    var isAnchor = item.URL.StartsWith("#");
                                    var link = isAnchor ? item.URL : Url.Content(item.URL);

                                    <li class="@isActive">
                                        <a href="@link">@item.Title</a>
                                    </li>
                                }
                            </ul>
                        </nav>
                    }



                    <div class="tmp-header-right">
                        <div class="social-share-wrapper d-none d-md-block">
                            <div class="social-link">
                                <a href="@Model.Tbl_AboutMe?.LinkedlnURL"><i class="fa-brands fa-linkedin-in"></i></a>
                                <a href="@Model.Tbl_AboutMe?.GithubURL"><i class="fa-brands fa-github"></i></a>
                            </div>
                        </div>

                        <!-- Dil Seçici -->
                        <div class="top-right pull-right lang">
                            <div class="social-links clearfix">
                                <select id="dilSecim" class="form-control">
                                    @{
                                        var cookieLang = Request.Cookies["lang"]?.Value?.ToLower() ?? "tr"; // Varsayılan "tr"
                                    }
                                    @foreach (var item2 in Model.Tbl_Languages)
                                    {
                                        var kisaltma = item2.ShortTitle.ToLower();

                                        <option value="@kisaltma" @(cookieLang == kisaltma ? "selected" : "")>@item2.Title</option>
                                    }
                                </select>
                            </div>
                        </div>



                        <div class="actions-area">
                            <div class="tmp-side-collups-area d-none d-xl-block">
                                <button class="tmp-menu-bars tmp_button_active"><i class="fa-regular fa-bars-staggered"></i></button>
                            </div>
                            <div class="tmp-side-collups-area d-block d-xl-none">
                                <button class="tmp-menu-bars humberger_menu_active"><i class="fa-regular fa-bars-staggered"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    function changeLanguage(select) {
                        var lang = select.value;
                        document.cookie = "lang=" + lang + "; path=/";
                        location.reload(); // Sayfayı yeniden yükle
                    }
                </script>

                <style>
                    .language-selector {
                        margin: 0 15px;
                    }

                    .language-dropdown {
                        padding: 6px 10px;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        background-color: #f8f9fa;
                        color: #333;
                        font-size: 14px;
                        cursor: pointer;
                    }

                    .tmp-header-right {
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                    }

                    .social-share-wrapper,
                    .language-selector,
                    .actions-area {
                        display: flex;
                        align-items: center;
                    }
                </style>

            </div>
        </div>
    </div>
</header>
<script>
var dilDegistirUrl = '@Url.Action("Dil_Degistir", "Home")';

$(document).ready(function () {
    $('#dilSecim').on('change', function () {
        var selectedValue = $(this).val();

        $.ajax({
            url: dilDegistirUrl,  // Controller action URL'si burada doğru oluşturulur
            type: 'POST',
            data: { dil: selectedValue },
            success: function () {
                console.log("Dil başarıyla değiştirildi.");
                window.location.href = '/';
            },
            error: function (xhr, status, error) {
                console.error("Dil değiştirme sırasında hata oluştu:", error);
                console.log(xhr.responseText);
            }
        });
    });
});

</script>